<!DOCTYPE html>
<html lang="tr" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>İlan Metni Oluşturucu - Emlak Asistanı</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#eef2ff',
                            100: '#e0e7ff',
                            200: '#c7d2fe',
                            300: '#a5b4fc',
                            400: '#818cf8',
                            500: '#6366f1',
                            600: '#4f46e5',
                            700: '#4338ca',
                            800: '#3730a3',
                            900: '#312e81',
                        }
                    }
                }
            }
        }
    </script>
    <!--
    ============================================================
    TASK-117: İlan Asistanı UI Tasarım Spec'i (S8.10)
    Tab 1: İlan Metni Oluşturma
    ============================================================

    TypeScript Interface Definitions:

    interface PropertyFeatures {
        balcony: boolean;
        parking: boolean;
        security: boolean;
        pool: boolean;
        seaView: boolean;
        centralHeating: boolean;
        elevator: boolean;
        metroNearby: boolean;
    }

    interface ListingFormData {
        propertyType: 'daire' | 'villa' | 'ofis' | 'arsa';
        roomCount: '1+0' | '1+1' | '2+1' | '3+1' | '4+1' | '5+2';
        grossSqm: number;
        netSqm?: number;
        floor: number;
        totalFloors?: number;
        buildingAge: number;
        district: string;
        neighborhood: string;
        features: PropertyFeatures;
        additionalNotes: string;
        tone: 'kurumsal' | 'samimi' | 'acil';
    }

    interface GeneratedListing {
        title: string;
        description: string;       // markdown-formatted
        tone: ListingFormData['tone'];
        generatedAt: string;        // ISO date
        wordCount: number;
    }

    interface ListingAssistantState {
        form: ListingFormData;
        result: GeneratedListing | null;
        isGenerating: boolean;
        activeTab: 'metin' | 'staging' | 'export';
    }

    // API Request
    interface GenerateListingRequest {
        formData: ListingFormData;
    }

    // API Response
    interface GenerateListingResponse {
        success: boolean;
        data: GeneratedListing;
        creditsUsed: number;
        creditsRemaining: number;
    }
    -->
</head>
<body class="h-full flex flex-col bg-slate-50 text-slate-900 dark:bg-slate-950 dark:text-slate-100">

    <!-- ========== HEADER ========== -->
    <header class="bg-white dark:bg-slate-900 border-b border-slate-200 dark:border-slate-800 px-4 sm:px-6 py-4 flex items-center justify-between sticky top-0 z-20" role="banner">
        <div class="flex items-center gap-3">
            <div class="p-2 bg-indigo-100 dark:bg-indigo-900/50 rounded-lg text-indigo-600 dark:text-indigo-400">
                <i data-lucide="building-2" class="w-6 h-6"></i>
            </div>
            <h1 class="text-xl font-bold text-slate-800 dark:text-slate-100">İlan Asistanı</h1>
        </div>
        <div class="flex items-center gap-3">
            <div class="flex items-center gap-2 px-3 py-1.5 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 rounded-full text-sm font-medium border border-emerald-100 dark:border-emerald-800">
                <i data-lucide="zap" class="w-4 h-4"></i>
                <span>342 Kredi</span>
            </div>
            <button class="p-2 text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full transition-colors" aria-label="Bildirimler">
                <i data-lucide="bell" class="w-5 h-5"></i>
            </button>
            <div class="w-8 h-8 bg-indigo-600 rounded-full text-white flex items-center justify-center font-bold text-sm" aria-label="Kullanıcı profili">F</div>
        </div>
    </header>

    <!-- ========== MAIN CONTENT ========== -->
    <main class="flex-1 max-w-7xl mx-auto w-full p-4 sm:p-6 lg:p-8" role="main">

        <!-- ===== TAB NAVIGATION ===== -->
        <div class="mb-6 sm:mb-8 border-b border-slate-200 dark:border-slate-800 overflow-x-auto">
            <nav class="flex gap-6 sm:gap-8 -mb-px min-w-max" aria-label="İlan asistanı sekmeleri" role="tablist">
                <a href="ilan-metin-olustur.html"
                   class="border-b-2 border-indigo-600 text-indigo-600 dark:text-indigo-400 dark:border-indigo-400 py-4 px-1 inline-flex items-center gap-2 font-medium text-sm whitespace-nowrap"
                   role="tab" aria-selected="true" aria-controls="tab-metin">
                    <i data-lucide="file-text" class="w-4 h-4"></i>
                    Metin Oluştur
                </a>
                <a href="virtual-staging.html"
                   class="border-b-2 border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300 hover:border-slate-300 py-4 px-1 inline-flex items-center gap-2 font-medium text-sm transition-colors whitespace-nowrap"
                   role="tab" aria-selected="false" aria-controls="tab-staging">
                    <i data-lucide="image" class="w-4 h-4"></i>
                    Virtual Staging
                    <span class="bg-indigo-100 dark:bg-indigo-900/50 text-indigo-700 dark:text-indigo-300 py-0.5 px-2 rounded-full text-xs font-semibold">YENİ</span>
                </a>
                <a href="portal-export.html"
                   class="border-b-2 border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300 hover:border-slate-300 py-4 px-1 inline-flex items-center gap-2 font-medium text-sm transition-colors whitespace-nowrap"
                   role="tab" aria-selected="false" aria-controls="tab-export">
                    <i data-lucide="share-2" class="w-4 h-4"></i>
                    Portal Export
                </a>
            </nav>
        </div>

        <!-- ===== TWO-COLUMN LAYOUT ===== -->
        <div id="tab-metin" class="grid lg:grid-cols-2 gap-6 lg:gap-8 items-start" role="tabpanel">

            <!-- ========== LEFT COLUMN: FORM ========== -->
            <div class="bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm p-5 sm:p-6 space-y-6">

                <!-- 1. EMLAK TİPİ -->
                <fieldset>
                    <legend class="block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-3">Emlak Tipi</legend>
                    <div class="grid grid-cols-2 sm:grid-cols-4 gap-3" role="radiogroup" aria-label="Emlak tipi seçimi">
                        <label class="cursor-pointer">
                            <input type="radio" name="propertyType" value="daire" checked class="peer sr-only">
                            <div class="p-3 sm:p-4 rounded-lg border-2 border-slate-200 dark:border-slate-700 peer-checked:border-indigo-600 peer-checked:bg-indigo-50 dark:peer-checked:bg-indigo-900/30 hover:bg-slate-50 dark:hover:bg-slate-800 transition-all text-center">
                                <i data-lucide="home" class="w-6 h-6 mx-auto mb-1.5 text-slate-400 dark:text-slate-500"></i>
                                <span class="text-sm font-medium text-slate-600 dark:text-slate-400">Daire</span>
                            </div>
                        </label>
                        <label class="cursor-pointer">
                            <input type="radio" name="propertyType" value="villa" class="peer sr-only">
                            <div class="p-3 sm:p-4 rounded-lg border-2 border-slate-200 dark:border-slate-700 peer-checked:border-indigo-600 peer-checked:bg-indigo-50 dark:peer-checked:bg-indigo-900/30 hover:bg-slate-50 dark:hover:bg-slate-800 transition-all text-center">
                                <i data-lucide="castle" class="w-6 h-6 mx-auto mb-1.5 text-slate-400 dark:text-slate-500"></i>
                                <span class="text-sm font-medium text-slate-600 dark:text-slate-400">Villa</span>
                            </div>
                        </label>
                        <label class="cursor-pointer">
                            <input type="radio" name="propertyType" value="ofis" class="peer sr-only">
                            <div class="p-3 sm:p-4 rounded-lg border-2 border-slate-200 dark:border-slate-700 peer-checked:border-indigo-600 peer-checked:bg-indigo-50 dark:peer-checked:bg-indigo-900/30 hover:bg-slate-50 dark:hover:bg-slate-800 transition-all text-center">
                                <i data-lucide="briefcase" class="w-6 h-6 mx-auto mb-1.5 text-slate-400 dark:text-slate-500"></i>
                                <span class="text-sm font-medium text-slate-600 dark:text-slate-400">Ofis</span>
                            </div>
                        </label>
                        <label class="cursor-pointer">
                            <input type="radio" name="propertyType" value="arsa" class="peer sr-only">
                            <div class="p-3 sm:p-4 rounded-lg border-2 border-slate-200 dark:border-slate-700 peer-checked:border-indigo-600 peer-checked:bg-indigo-50 dark:peer-checked:bg-indigo-900/30 hover:bg-slate-50 dark:hover:bg-slate-800 transition-all text-center">
                                <i data-lucide="map" class="w-6 h-6 mx-auto mb-1.5 text-slate-400 dark:text-slate-500"></i>
                                <span class="text-sm font-medium text-slate-600 dark:text-slate-400">Arsa</span>
                            </div>
                        </label>
                    </div>
                </fieldset>

                <!-- 2. ÖZELLİKLER + KONUM -->
                <div class="grid sm:grid-cols-2 gap-6">
                    <!-- Özellikler -->
                    <fieldset class="space-y-3">
                        <legend class="text-sm font-semibold text-slate-900 dark:text-slate-200 border-b border-slate-100 dark:border-slate-800 pb-2 w-full">Özellikler</legend>
                        <div class="grid grid-cols-2 gap-3">
                            <div>
                                <label for="roomCount" class="block text-xs text-slate-500 dark:text-slate-400 mb-1">Oda Sayısı</label>
                                <select id="roomCount" class="w-full rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 shadow-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 text-sm py-2 px-3" aria-label="Oda sayısı">
                                    <option>1+0</option>
                                    <option>1+1</option>
                                    <option selected>2+1</option>
                                    <option>3+1</option>
                                    <option>4+1</option>
                                    <option>5+2</option>
                                </select>
                            </div>
                            <div>
                                <label for="grossSqm" class="block text-xs text-slate-500 dark:text-slate-400 mb-1">Brüt m²</label>
                                <div class="relative">
                                    <input id="grossSqm" type="number" class="block w-full rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 text-sm py-2 px-3 pr-10" placeholder="120" aria-label="Brüt metrekare">
                                    <span class="absolute inset-y-0 right-0 flex items-center pr-3 text-slate-400 text-xs pointer-events-none">m²</span>
                                </div>
                            </div>
                            <div>
                                <label for="floor" class="block text-xs text-slate-500 dark:text-slate-400 mb-1">Bulunduğu Kat</label>
                                <input id="floor" type="number" class="block w-full rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 text-sm py-2 px-3" placeholder="3" aria-label="Bulunduğu kat">
                            </div>
                            <div>
                                <label for="buildingAge" class="block text-xs text-slate-500 dark:text-slate-400 mb-1">Bina Yaşı</label>
                                <input id="buildingAge" type="number" class="block w-full rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 text-sm py-2 px-3" placeholder="5" aria-label="Bina yaşı">
                            </div>
                        </div>
                    </fieldset>

                    <!-- Konum -->
                    <fieldset class="space-y-3">
                        <legend class="text-sm font-semibold text-slate-900 dark:text-slate-200 border-b border-slate-100 dark:border-slate-800 pb-2 w-full">Konum</legend>
                        <div class="space-y-3">
                            <div>
                                <label for="district" class="block text-xs text-slate-500 dark:text-slate-400 mb-1">İlçe</label>
                                <select id="district" class="w-full rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 shadow-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 text-sm py-2 px-3" aria-label="İlçe seçimi">
                                    <option>Kadıköy</option>
                                    <option>Beşiktaş</option>
                                    <option>Şişli</option>
                                    <option>Üsküdar</option>
                                    <option>Bakırköy</option>
                                    <option>Sarıyer</option>
                                </select>
                            </div>
                            <div>
                                <label for="neighborhood" class="block text-xs text-slate-500 dark:text-slate-400 mb-1">Mahalle</label>
                                <select id="neighborhood" class="w-full rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 shadow-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 text-sm py-2 px-3" aria-label="Mahalle seçimi">
                                    <option>Moda</option>
                                    <option>Caferağa</option>
                                    <option>Fenerbahçe</option>
                                    <option>Acıbadem</option>
                                </select>
                            </div>
                        </div>
                    </fieldset>
                </div>

                <!-- 3. ÖNE ÇIKAN ÖZELLİKLER -->
                <fieldset>
                    <legend class="block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-3">Öne Çıkan Özellikler</legend>
                    <div class="grid grid-cols-2 sm:grid-cols-4 gap-3" role="group" aria-label="Emlak özellikleri">
                        <label class="inline-flex items-center gap-2 cursor-pointer">
                            <input type="checkbox" checked class="rounded border-slate-300 dark:border-slate-600 text-indigo-600 focus:ring-indigo-500 focus:ring-offset-0">
                            <span class="text-sm text-slate-600 dark:text-slate-400">Balkon</span>
                        </label>
                        <label class="inline-flex items-center gap-2 cursor-pointer">
                            <input type="checkbox" class="rounded border-slate-300 dark:border-slate-600 text-indigo-600 focus:ring-indigo-500 focus:ring-offset-0">
                            <span class="text-sm text-slate-600 dark:text-slate-400">Otopark</span>
                        </label>
                        <label class="inline-flex items-center gap-2 cursor-pointer">
                            <input type="checkbox" class="rounded border-slate-300 dark:border-slate-600 text-indigo-600 focus:ring-indigo-500 focus:ring-offset-0">
                            <span class="text-sm text-slate-600 dark:text-slate-400">Güvenlik</span>
                        </label>
                        <label class="inline-flex items-center gap-2 cursor-pointer">
                            <input type="checkbox" class="rounded border-slate-300 dark:border-slate-600 text-indigo-600 focus:ring-indigo-500 focus:ring-offset-0">
                            <span class="text-sm text-slate-600 dark:text-slate-400">Havuz</span>
                        </label>
                        <label class="inline-flex items-center gap-2 cursor-pointer">
                            <input type="checkbox" checked class="rounded border-slate-300 dark:border-slate-600 text-indigo-600 focus:ring-indigo-500 focus:ring-offset-0">
                            <span class="text-sm text-slate-600 dark:text-slate-400">Deniz Manzarası</span>
                        </label>
                        <label class="inline-flex items-center gap-2 cursor-pointer">
                            <input type="checkbox" checked class="rounded border-slate-300 dark:border-slate-600 text-indigo-600 focus:ring-indigo-500 focus:ring-offset-0">
                            <span class="text-sm text-slate-600 dark:text-slate-400">Merkezi Isıtma</span>
                        </label>
                        <label class="inline-flex items-center gap-2 cursor-pointer">
                            <input type="checkbox" checked class="rounded border-slate-300 dark:border-slate-600 text-indigo-600 focus:ring-indigo-500 focus:ring-offset-0">
                            <span class="text-sm text-slate-600 dark:text-slate-400">Asansör</span>
                        </label>
                        <label class="inline-flex items-center gap-2 cursor-pointer">
                            <input type="checkbox" checked class="rounded border-slate-300 dark:border-slate-600 text-indigo-600 focus:ring-indigo-500 focus:ring-offset-0">
                            <span class="text-sm text-slate-600 dark:text-slate-400">Metro Yakını</span>
                        </label>
                    </div>
                </fieldset>

                <!-- 4. EK NOTLAR -->
                <div>
                    <label for="additionalNotes" class="block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2">Ek Notlar</label>
                    <textarea id="additionalNotes" rows="3"
                        class="block w-full rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 shadow-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 text-sm py-2.5 px-3 placeholder-slate-400 dark:placeholder-slate-500 resize-none"
                        placeholder="Örn: Yeni tadilattan çıktı, açık mutfak, ebeveyn banyosu mevcut..."
                        aria-label="Ek notlar ve öne çıkarmak istediğiniz detaylar"></textarea>
                    <p class="mt-1 text-xs text-slate-400 dark:text-slate-500">İlanda vurgulanmasını istediğiniz detayları buraya yazın.</p>
                </div>

                <!-- 5. TON SEÇİMİ (SegmentedControl) -->
                <fieldset>
                    <legend class="block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-3">İlan Dili / Tonu</legend>
                    <div class="bg-slate-100 dark:bg-slate-800 p-1 rounded-lg flex" role="radiogroup" aria-label="İlan tonu seçimi">
                        <button type="button" class="tone-btn flex-1 py-2.5 px-3 rounded-md bg-white dark:bg-slate-700 shadow-sm text-sm font-medium text-slate-900 dark:text-slate-100 transition-all" data-tone="kurumsal" aria-pressed="true">
                            Kurumsal
                        </button>
                        <button type="button" class="tone-btn flex-1 py-2.5 px-3 rounded-md text-sm font-medium text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200 transition-all" data-tone="samimi" aria-pressed="false">
                            Samimi
                        </button>
                        <button type="button" class="tone-btn flex-1 py-2.5 px-3 rounded-md text-sm font-medium text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200 transition-all" data-tone="acil" aria-pressed="false">
                            Acil / Fırsat
                        </button>
                    </div>
                    <!-- Ton Açıklamaları -->
                    <div class="mt-3 space-y-0">
                        <div id="tone-desc-kurumsal" class="tone-desc flex items-start gap-2 p-3 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg border border-indigo-100 dark:border-indigo-800/50">
                            <i data-lucide="building" class="w-4 h-4 text-indigo-600 dark:text-indigo-400 mt-0.5 shrink-0"></i>
                            <p class="text-xs text-indigo-700 dark:text-indigo-300">Profesyonel ve resmi dil. Kurumsal alıcılara, yatırımcılara hitap eder. Teknik detaylar ön plandadır.</p>
                        </div>
                        <div id="tone-desc-samimi" class="tone-desc hidden flex items-start gap-2 p-3 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-100 dark:border-amber-800/50">
                            <i data-lucide="heart" class="w-4 h-4 text-amber-600 dark:text-amber-400 mt-0.5 shrink-0"></i>
                            <p class="text-xs text-amber-700 dark:text-amber-300">Sıcak, samimi bir anlatım. Aile arayan bireysel alıcılara hitap eder. Yaşam alanı vurgusu yapılır.</p>
                        </div>
                        <div id="tone-desc-acil" class="tone-desc hidden flex items-start gap-2 p-3 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-100 dark:border-red-800/50">
                            <i data-lucide="flame" class="w-4 h-4 text-red-600 dark:text-red-400 mt-0.5 shrink-0"></i>
                            <p class="text-xs text-red-700 dark:text-red-300">Aciliyet hissi veren, fırsat vurgulayan dil. Hızlı satış hedefi olan ilanlar için idealdir.</p>
                        </div>
                    </div>
                </fieldset>

                <!-- SUBMIT BUTTON -->
                <div class="pt-2 border-t border-slate-100 dark:border-slate-800">
                    <button id="btn-generate" type="button"
                        class="w-full bg-indigo-600 hover:bg-indigo-700 text-white py-3 px-4 rounded-lg font-medium shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-offset-slate-900 transition-colors flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed"
                        aria-label="İlan metni oluştur">
                        <i data-lucide="sparkles" class="w-5 h-5"></i>
                        İlan Metni Oluştur
                    </button>
                    <p class="mt-2 text-center text-xs text-slate-400 dark:text-slate-500">1 kredi kullanılır</p>
                </div>
            </div>

            <!-- ========== RIGHT COLUMN: PREVIEW ========== -->
            <div class="space-y-6">

                <!-- ===== LOADING STATE (hidden by default, toggle via JS) ===== -->
                <div id="loading-state" class="hidden bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm overflow-hidden min-h-[500px] flex flex-col items-center justify-center p-8">
                    <div class="relative">
                        <div class="w-16 h-16 border-4 border-indigo-200 dark:border-indigo-800 rounded-full animate-spin border-t-indigo-600 dark:border-t-indigo-400"></div>
                        <div class="absolute inset-0 flex items-center justify-center">
                            <i data-lucide="sparkles" class="w-6 h-6 text-indigo-600 dark:text-indigo-400"></i>
                        </div>
                    </div>
                    <p class="mt-6 text-sm font-medium text-slate-700 dark:text-slate-300">İlan metniniz hazırlanıyor...</p>
                    <p class="mt-1 text-xs text-slate-400 dark:text-slate-500">Bu işlem birkaç saniye sürebilir</p>
                    <div class="mt-4 flex gap-1">
                        <div class="w-2 h-2 rounded-full bg-indigo-600 animate-bounce" style="animation-delay: 0ms"></div>
                        <div class="w-2 h-2 rounded-full bg-indigo-600 animate-bounce" style="animation-delay: 150ms"></div>
                        <div class="w-2 h-2 rounded-full bg-indigo-600 animate-bounce" style="animation-delay: 300ms"></div>
                    </div>
                </div>

                <!-- ===== EMPTY STATE (shown when no result yet) ===== -->
                <div id="empty-state" class="hidden bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm overflow-hidden min-h-[500px] flex flex-col items-center justify-center p-8 text-center">
                    <div class="w-16 h-16 bg-slate-100 dark:bg-slate-800 rounded-full flex items-center justify-center mb-4">
                        <i data-lucide="file-text" class="w-8 h-8 text-slate-400 dark:text-slate-500"></i>
                    </div>
                    <h3 class="text-sm font-medium text-slate-700 dark:text-slate-300">Henüz ilan metni oluşturulmadı</h3>
                    <p class="mt-1 text-xs text-slate-400 dark:text-slate-500 max-w-xs">Sol paneldeki formu doldurup "İlan Metni Oluştur" butonuna tıklayın.</p>
                </div>

                <!-- ===== RESULT STATE ===== -->
                <div id="result-state" class="bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm overflow-hidden flex flex-col min-h-[500px]">
                    <!-- Preview Header -->
                    <div class="bg-slate-50 dark:bg-slate-800/50 px-5 sm:px-6 py-4 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center">
                        <h3 class="font-semibold text-slate-800 dark:text-slate-200 flex items-center gap-2 text-sm">
                            <i data-lucide="eye" class="w-4 h-4 text-slate-500 dark:text-slate-400"></i>
                            Önizleme
                        </h3>
                        <div class="flex items-center gap-2">
                            <span id="tone-badge" class="text-xs text-indigo-700 dark:text-indigo-300 bg-indigo-50 dark:bg-indigo-900/40 border border-indigo-100 dark:border-indigo-800 px-2.5 py-1 rounded-full font-medium">Kurumsal Ton</span>
                            <span class="text-xs text-slate-400 dark:text-slate-500">247 kelime</span>
                        </div>
                    </div>

                    <!-- Preview Content -->
                    <div class="p-5 sm:p-6 flex-1 overflow-y-auto">
                        <div class="space-y-5">
                            <!-- Title -->
                            <div>
                                <label class="block text-xs uppercase tracking-wider text-slate-400 dark:text-slate-500 font-semibold mb-2">İlan Başlığı</label>
                                <h2 class="text-lg sm:text-xl font-bold text-slate-900 dark:text-slate-100 leading-tight">Kadıköy Moda'da, Deniz Manzaralı, Metroya 5 Dk Mesafede Fırsat 2+1 Daire</h2>
                            </div>

                            <!-- Description -->
                            <div>
                                <label class="block text-xs uppercase tracking-wider text-slate-400 dark:text-slate-500 font-semibold mb-2">İlan Açıklaması</label>
                                <div class="prose prose-sm dark:prose-invert text-slate-600 dark:text-slate-300 space-y-3 max-w-none">
                                    <p>İstanbul'un en gözde semtlerinden Kadıköy Moda'da yer alan bu ferah daire, hem konforlu bir yaşam alanı hem de yüksek yatırım değeri sunmaktadır.</p>
                                    <p>Brüt 120m² alana sahip dairemiz, 3. katta bulunmakta olup asansörlüdür. Geniş balkonu sayesinde günün yorgunluğunu eşsiz deniz manzarası eşliğinde atabilirsiniz. Merkezi ısıtma sistemi ile kış aylarında sıcak ve konforlu bir ortam sağlar.</p>
                                    <p class="font-medium text-slate-700 dark:text-slate-200">Öne Çıkan Özellikler:</p>
                                    <ul class="list-disc pl-5 space-y-1 text-slate-600 dark:text-slate-400">
                                        <li>Metro ve toplu taşımaya yürüme mesafesinde</li>
                                        <li>Geniş balkon ile deniz manzarası</li>
                                        <li>Merkezi ısıtma sistemi</li>
                                        <li>7/24 güvenlikli site</li>
                                        <li>Asansörlü bina</li>
                                    </ul>
                                    <p>Bu eşsiz lokasyondaki daireyi yerinde görmek için hemen randevu oluşturabilirsiniz.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Preview Actions -->
                    <div class="p-4 sm:p-5 border-t border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800/50">
                        <div class="grid grid-cols-3 gap-3">
                            <button class="flex items-center justify-center gap-2 px-3 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-600 font-medium transition-colors shadow-sm text-sm" aria-label="Yeniden üret">
                                <i data-lucide="refresh-cw" class="w-4 h-4"></i>
                                <span class="hidden sm:inline">Yeniden Üret</span>
                                <span class="sm:hidden">Yenile</span>
                            </button>
                            <button class="flex items-center justify-center gap-2 px-3 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-600 font-medium transition-colors shadow-sm text-sm" aria-label="Tonu değiştir">
                                <i data-lucide="palette" class="w-4 h-4"></i>
                                <span class="hidden sm:inline">Tonu Değiştir</span>
                                <span class="sm:hidden">Ton</span>
                            </button>
                            <button class="flex items-center justify-center gap-2 px-3 py-2.5 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg font-medium transition-colors shadow-sm text-sm" aria-label="Metni kopyala">
                                <i data-lucide="copy" class="w-4 h-4"></i>
                                <span class="hidden sm:inline">Metni Kopyala</span>
                                <span class="sm:hidden">Kopyala</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- ========== SCRIPTS ========== -->
    <script>
        // Initialize Lucide icons
        lucide.createIcons();

        // === Tone Switching ===
        const toneBtns = document.querySelectorAll('.tone-btn');
        const toneDescs = document.querySelectorAll('.tone-desc');

        toneBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                // Reset all buttons
                toneBtns.forEach(b => {
                    b.classList.remove('bg-white', 'dark:bg-slate-700', 'shadow-sm', 'text-slate-900', 'dark:text-slate-100');
                    b.classList.add('text-slate-500', 'dark:text-slate-400');
                    b.setAttribute('aria-pressed', 'false');
                });
                // Activate clicked
                btn.classList.add('bg-white', 'dark:bg-slate-700', 'shadow-sm', 'text-slate-900', 'dark:text-slate-100');
                btn.classList.remove('text-slate-500', 'dark:text-slate-400');
                btn.setAttribute('aria-pressed', 'true');

                // Show matching description
                const tone = btn.dataset.tone;
                toneDescs.forEach(d => d.classList.add('hidden'));
                const target = document.getElementById('tone-desc-' + tone);
                if (target) target.classList.remove('hidden');

                // Update badge
                const badge = document.getElementById('tone-badge');
                const labels = { kurumsal: 'Kurumsal Ton', samimi: 'Samimi Ton', acil: 'Acil / Fırsat Tonu' };
                if (badge) badge.textContent = labels[tone] || tone;
            });
        });

        // === Generate Button — toggle loading/result states ===
        const btnGenerate = document.getElementById('btn-generate');
        const loadingState = document.getElementById('loading-state');
        const emptyState = document.getElementById('empty-state');
        const resultState = document.getElementById('result-state');

        btnGenerate.addEventListener('click', () => {
            loadingState.classList.remove('hidden');
            resultState.classList.add('hidden');
            emptyState.classList.add('hidden');

            // Simulate API delay
            setTimeout(() => {
                loadingState.classList.add('hidden');
                resultState.classList.remove('hidden');
            }, 2000);
        });

        // === Dark Mode Toggle (press D key for demo) ===
        document.addEventListener('keydown', (e) => {
            if (e.key === 'd' && e.target.tagName !== 'INPUT' && e.target.tagName !== 'TEXTAREA' && e.target.tagName !== 'SELECT') {
                document.documentElement.classList.toggle('dark');
            }
        });
    </script>
</body>
</html>
